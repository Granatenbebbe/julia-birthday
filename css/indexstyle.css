:root{
    --primary: #fff;
    --bg-color: rgb(5, 53, 61);
    --bg-envelope-color: #f5edd1;
    --envelope-tab: #ecdeb8;
    --envelope-cover: #e6cfa7;
    --shadow-color: rgba(0, 0, 0, 0.2);
    --txt-color: #444;
    --heart-color: rgb(252, 8, 20);
    --letter-color: #000;
  }
  body{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background: var(--bg-color);
    display: flex;
    align-items: center;
    justify-content: center;
  }
.container {
  height: 100vh;
  display: grid;
  place-items: center;
}
.container > .envelope-wrapper {
  background: var(--bg-envelope-color);
  box-shadow: 0 0 40px var(--shadow-color);
  transform: scale(1.2);
  transform-origin: 50% 0%;
  transition: transform 3.5s ease-in-out 1.2s;
}

.container > .envelope-wrapper.flap {
  transform: scale(12);
  transform-origin: 50% 0%;
}
.container .envelope-wrapper .envelope{
    position: relative;
    width: 450px;
    height: 340px;
}
.envelope-wrapper > .envelope::before{
    content: "";
    position: absolute;
    top: 0;
    z-index: 2;
    border-top: 195px solid var(--envelope-tab);
    border-right: 225px solid transparent;
    border-left: 225px solid transparent;
    transform-origin: top;
    transition: all 1.5s ease-in-out 0.7s;
}
.container .envelope-wrapper .envelope::after{
    content: "";
    position: absolute;
    z-index: 2;
    width: 0;
    height: 0;
    border-top: 195px solid transparent;
    border-right: 225px solid var(--envelope-cover);
    border-bottom: 150px solid var(--envelope-cover);
    border-left: 225px solid var(--envelope-cover);
}


.container .envelope-wrapper .envelope .letter .text{
    font-family: Arial, Helvetica, sans-serif;
    color: var(--txt-color);
    text-align: left;
    font-size: 10px;
}
/* Container für das Siegel */
.heart {
    position: absolute;
    top: 47%;
    left: 50%;
    margin-top: 25px; /* Korrektur, damit es auf der Spitze sitzt */
    
    /* Größe des Siegels - 100px sieht bei diesem Detailgrad gut aus */
    width: 100px;  
    height: 100px;
    
    transform: translate(-50%, -50%);
    z-index: 4;
    cursor: pointer;
    /* Damit wir die Hälften absolut positionieren können */
    display: block; 
    animation: sealPulse 2s infinite ease-in-out;
}

/* --- UPDATE START: Smoother Seal Animation --- */

/* Basis-Styling für die Hälften */
.seal-half {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    background-image: url('../img/wax.png');
    background-size: 100%;
    background-position: center 40%;
    background-repeat: no-repeat;
    
    /* Rendering-Optimierung */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    
    /* WICHTIG: Unterschiedliche Transitions für Transform (Bewegung) und Opacity (Sichtbarkeit) */
    /* Transform dauert 1s mit einer "Gravity"-Kurve (startet langsam, wird schneller) */
    /* Opacity wartet 0.3s und blendet dann langsam aus */
    transition: transform 1.2s cubic-bezier(0.5, 0, 0.5, 1), 
                opacity 0.8s ease-out 0.4s;
}

.seal-half.left {
    clip-path: polygon(0 0, 52% 0, 47% 50%, 52% 100%, 0 100%);
    transform-origin: bottom right; /* Drehpunkt angepasst für besseres "Wegbrechen" */
}

.seal-half.right {
    clip-path: polygon(48% 0, 100% 0, 100% 100%, 48% 100%, 43% 50%);
    transform-origin: bottom left;
}

/* --- ANIMATION BEIM KLICKEN --- */

.flap .seal-half.left {
    /* Fällt weiter und dreht stärker */
    transform: translate(-100px, 300px) rotate(-60deg) scale(0.6);
    opacity: 0;
}

.flap .seal-half.right {
    transform: translate(100px, 300px) rotate(60deg) scale(0.6);
    opacity: 0;
}

/* WICHTIG: Performance-Killer "Filter" sofort töten */
.flap .heart {
    animation: none !important;
    filter: none !important; /* Entfernt den Schatten sofort */
    transform: translate(-50%, -50%) !important;
    pointer-events: none;
}

/* Optional: Den Klick-Text sofort ausblenden, falls er noch da wäre */
.flap .click-hint {
    display: none;
}

.flap .heart {
    position: fixed; /* Fixieren beim Zoom */
    pointer-events: none; /* Nicht mehr klickbar */
    transform: translate(-50%, -50%) !important; /* Position halten */
}



.flap .envelope::before{
    transform: rotateX(180deg);
    z-index: 0;
}


.flap .heart {
    /* Wir fügen translate(-50%, -50%) hinzu, damit es nicht springt! */
    transform: translate(-50%, -50%) !important;
    
    transition-delay: 0.4s;
    position: fixed;
    top: 50% !important;
    left: 50% !important;
    
    /* Wir behalten den gleichen Abstand bei, damit es vertikal nicht hüpft */
    margin-top: 25px; 
}
.envelope > .letter{
    position: absolute;
    right: 20%;
    bottom: 0;
    width: 54%;
    height: 80%;
    background: #000;
    background-image: radial-gradient(ellipse at top, transparent 0%, #000), 
    radial-gradient(ellipse at bottom, #000, rgba(145, 233, 255, 0.2)), 
    repeating-linear-gradient(220deg, rgb(0, 0, 0) 0px, rgb(0, 0, 0) 19px, transparent 19px, 
    transparent 22px), repeating-linear-gradient(189deg, rgb(0, 0, 0) 0px, rgb(0, 0, 0) 19px, 
    transparent 19px, transparent 22px), repeating-linear-gradient(148deg, rgb(0, 0, 0) 0px, 
    rgb(0, 0, 0) 19px, transparent 19px, transparent 22px), linear-gradient(90deg, rgb(21, 255, 0), 
    rgb(240, 240, 240));
    text-align: center;
    transition: all  1s ease-in-out;
    box-shadow: 0 0 5px var(--shadow-color);
    padding: 20px 10px;
}
.flap .envelope .letter {
    bottom: 100px;
    transform: scale(1.5);
    transition-delay: 1.5s;
}
/* Das Overlay für den Übergang */
.fade-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: #000; /* Schwarz passend zur FLORES.html Nacht */
    opacity: 0;
    pointer-events: none; /* Klicks gehen durch */
    z-index: 9999; /* Muss über allem liegen */
    transition: opacity 1.5s ease-in-out; /* Dauer des Schwarz-Werdens */
    
}

/* Diese Klasse wird per JS hinzugefügt, um den Fade zu starten */
body.start-fade .fade-overlay {
    opacity: 1;
}
/* --- Animation: Sanftes Pulsieren & Leuchten --- */
@keyframes sealPulse {
    0% { 
        transform: translate(-50%, -50%) scale(1); 
        filter: drop-shadow(0 2px 3px rgba(0,0,0,0.5)); 
    }
    50% { 
        /* Skalierung leicht erhöht & GLOW extrem verstärkt */
        transform: translate(-50%, -50%) scale(1.08); 
        /* Helleres Gold, größerer Radius, volle Deckkraft */
        filter: drop-shadow(0 0 20px rgba(255, 230, 0, 1)); 
    }
    100% { 
        transform: translate(-50%, -50%) scale(1); 
        filter: drop-shadow(0 2px 3px rgba(0,0,0,0.5)); 
    }
}


/* Hover-Effekt: Wenn die Maus drauf ist, wird es noch deutlicher */
.heart:hover {
    /* Animation kurz pausieren und Siegel vergrößern */
    animation-play-state: paused;
    transform: translate(-50%, -50%) scale(1.15);
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
    z-index: 10; /* Sicherstellen, dass es oben liegt */
}

/* --- FINALE MOBILE OPTIMIERUNG V9 (Langer Brief & Kollisions-Fix) --- */
@media screen and (max-width: 768px) {

    /* 1. Umschlag Basis-Position */
    .container > .envelope-wrapper {
        transform: scale(0.7);
        /* Fokus bleibt oben (-10%) für den perfekten Blickwinkel */
        transform-origin: center -10% !important; 
    }

    /* 2. Zoom beim Öffnen */
    .container > .envelope-wrapper.flap {
        transform: scale(6) !important; 
        transform-origin: center -10% !important; 
    }

    /* 3. Der Brief - Startzustand */
    .envelope > .letter {
        /* KORREKTUR: Brief ist jetzt viel länger/höher (95%) */
        height: 95% !important;
        width: 80% !important;
        
        right: auto !important; 
        left: 50% !important;
        bottom: auto !important;
        top: 50% !important;
        transform: translate(-50%, -50%) !important;
        z-index: 1 !important; 
        opacity: 0;
    }

    /* 4. Der Brief - Endzustand */
    .flap .envelope .letter {
        /* KORREKTUR:
           - translateY(-150px): Da er länger ist, schieben wir ihn etwas weniger weit,
             sonst schwebt er unten aus dem Umschlag raus.
           - scale(0.9): Größe bleibt gut lesbar.
        */
        transform: translate(-50%, -50%) translateY(-150px) scale(0.9) !important;
        
        z-index: 1 !important;
        opacity: 1;
        
        /* WICHTIG GEGEN KOLLISION:
           - Delay auf 1.2s erhöht.
           - Der Brief wartet jetzt kurz, bis die Lasche wirklich offen ist.
        */
        transition: 
            transform 2.0s ease-in-out 1.2s, 
            opacity 0.5s linear 1.2s;
    }
    
    /* Siegel & Hinweis */
    .heart {
        width: 120px;
        height: 120px;
    }
    .click-hint { display: none; }
}